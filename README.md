# Генератор голоса из текста

Это Streamlit-приложение позволяет генерировать речь из текста, используя модель TTS (Text-to-Speech) `xtts_v2`. Приложение поддерживает выбор различных голосов, настройку параметров речи (скорость, вариативность, громкость), добавление фонового звука и возможность использования собственного аудиофайла в качестве образца голоса для текущей озвучки.

## Возможности

* **Генерация речи из текста**: Преобразует введенный текст в аудиофайл.
* **Выбор голоса**: Предлагает предопределенные мужские и женские голоса.
* **Добавление новых голосов**: Пользователи могут загружать свои аудиофайлы для создания новых голосов, которые будут доступны в списке.
* **Настройка параметров речи**:
    * **Скорость речи**: Регулировка темпа произношения.
    * **Вариативность (Temperature)**: Контроль интонаций и акцентов для более живого или стабильного звучания.
    * **Громкость голоса**: Настройка общей громкости синтезированной речи.
* **Добавление фонового звука**: Возможность наложения фонового аудио на сгенерированную речь с регулировкой громкости.
* **Использование пользовательского образца голоса**: Загрузка аудиофайла (3-6 секунд) для имитации его тембра, интонаций и эмоций в текущей озвучке.
* **Экспорт аудио**: Сохранение сгенерированного аудио в форматах WAV, MP3 и OGG.

## Установка и запуск

Для запуска приложения вам потребуется установленный Python и несколько библиотек.

### 1. Клонирование репозитория (или скачивание файлов)

Если ваш код находится в репозитории, клонируйте его:

```bash
git clone <URL вашего репозитория>
cd <название папки репозитория>
Если у вас просто файлы, убедитесь, что app.py и любые дополнительные папки (например, voices) находятся в одной директории.

2. Установка зависимостей
Перейдите в директорию с файлами проекта и установите необходимые Python-библиотеки:

Bash

pip install -r requirements.txt
Примечание: Убедитесь, что у вас есть файл requirements.txt со следующим содержимым:

streamlit
torch
TTS
pydub
numpy
3. Установка FFmpeg
Для работы с аудиоформатами (конвертация, наложение) приложение использует FFmpeg. Вам необходимо установить FFmpeg и указать путь к исполняемому файлу ffmpeg.exe в коде app.py.

Скачайте FFmpeg: Перейдите на официальный сайт FFmpeg и скачайте соответствующую вашей операционной системе версию.

Распакуйте: Распакуйте архив в удобное для вас место, например, C:/ffmpeg/.

Настройте путь в app.py: Откройте файл app.py и измените строку:

Python

AudioSegment.converter = "C:/ffmpeg/bin/ffmpeg.exe" # Или просто "ffmpeg", если он в PATH
на путь к вашему ffmpeg.exe. Если вы добавили FFmpeg в системную переменную PATH, можно оставить "ffmpeg".

4. Запуск приложения
После установки всех зависимостей и FFmpeg, запустите приложение Streamlit из командной строки:

Bash

streamlit run app.py
Приложение откроется в вашем веб-браузере по умолчанию.

Использование приложения
Добавление нового голоса:

В разделе "Добавить новый голос" загрузите аудиофайл (WAV, MP3, OGG, M4A).
Введите имя для нового голоса и выберите пол.
Нажмите "Добавить голос". Новый голос появится в списке выбора голосов.
Выбор основного голоса:

Выберите пол (Мужские или Женские).
Из выпадающего списка выберите желаемый голос.
Нажмите "Предпрослушка голоса", чтобы услышать, как звучит выбранный голос.
Настройки голоса:

Перемещайте ползунки, чтобы настроить "Скорость речи", "Вариативность" и "Громкость голоса".
Отметьте "Добавить фоновый звук", если хотите добавить фоновое аудио. Загрузите файл и настройте "Громкость фонового звука".
Ввод текста и синтез:

Введите текст для озвучки в текстовое поле.
Опционально: Загрузите "образец голоса для текущей озвучки". Этот файл будет использоваться для имитации тембра и интонаций в текущей генерации, переопределяя выбранный голос из списка.
Нажмите "Озвучить текст".
Скачивание аудио:

После завершения синтеза вы сможете прослушать сгенерированное аудио.
Под аудио проигрывателем появятся ссылки для скачивания в форматах MP3, WAV и OGG.
Структура проекта
app.py: Основной исполняемый файл Streamlit-приложения.
voices/: Директория для хранения аудиофайлов голосов. В этой папке будут храниться как предопределенные, так и добавленные пользователем голоса.
voices/voices.json: JSON-файл, в котором сохраняются метаданные о добавленных пользователем голосах.
requirements.txt: Список Python-библиотек, необходимых для запуска приложения.
Замечания по производительности
Генерация голоса, особенно с использованием больших текстов или наложением фонового звука, может занимать некоторое время.
Качество синтезированной речи сильно зависит от качества предоставленного образца голоса (если используется пользовательский образец).
Параметр "Вариативность" может влиять на стабильность и естественность речи. Экспериментируйте с ним, чтобы найти оптимальное значение.
Лицензия
[Укажите информацию о лицензии, если применимо.]
