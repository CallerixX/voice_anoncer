# Voice Anoncer

Приложение для озвучки текста с использованием искусственного интеллекта. Позволяет генерировать голосовые сообщения с различными голосами, добавлять фоновые звуки и скачивать результат в разных форматах.

## Возможности

- Озвучка текста с использованием различных голосов
- Выбор пола и конкретного голоса
- Предпрослушка голоса перед генерацией
- Настройка скорости речи
- Добавление фоновых звуков с настраиваемой громкостью
- Скачивание результата в форматах WAV, MP3 и OGG
- Возможность добавления собственных голосов
- Сохранение пользовательских голосов между сессиями

## Требования

- Python 3.8 или выше
- ffmpeg
- Доступ в интернет (для загрузки модели TTS)
- Минимум 2 ГБ RAM
- Минимум 2 CPU ядра

## Установка

### Для разработчиков

1. Клонируйте репозиторий:
```bash
git clone https://github.com/CallerixX/voice_anoncer.git
cd voice_anoncer
```

2. Создайте виртуальное окружение:
```bash
python -m venv .venv
source .venv/bin/activate  # для Linux/Mac
# или
.venv\Scripts\activate  # для Windows
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Установите ffmpeg:
```bash
# Для Ubuntu/Debian
sudo apt update
sudo apt install ffmpeg

# Для macOS
brew install ffmpeg

# Для Windows
# Скачайте ffmpeg с официального сайта и добавьте в PATH
```

5. Создайте директорию для голосов:
```bash
mkdir voices
```

6. Поместите голосовые файлы в формате WAV в директорию `voices/`. Имена файлов должны соответствовать именам голосов в коде.

### Для пользователей

1. Скачайте последнюю версию приложения с GitHub
2. Установите Python 3.8 или выше
3. Установите ffmpeg (инструкции выше)
4. Следуйте инструкциям по установке из раздела "Для разработчиков"

## Использование

### Локальный запуск

1. Активируйте виртуальное окружение:
```bash
source .venv/bin/activate  # для Linux/Mac
# или
.venv\Scripts\activate  # для Windows
```

2. Запустите приложение:
```bash
streamlit run app.py
```

3. Откройте браузер и перейдите по адресу http://localhost:8501

### Развертывание на сервере

1. Установите необходимые пакеты:
```bash
sudo apt update
sudo apt install python3-pip python3-venv ffmpeg nginx
```

2. Настройте systemd сервис:
```bash
sudo cp voice_anoncer.service /etc/systemd/system/
sudo nano /etc/systemd/system/voice_anoncer.service  # Отредактируйте пути и пользователя
sudo systemctl daemon-reload
sudo systemctl enable voice_anoncer
sudo systemctl start voice_anoncer
```

3. Настройте Nginx:
```bash
sudo cp voice_anoncer.nginx.conf /etc/nginx/sites-available/voice_anoncer
sudo ln -s /etc/nginx/sites-available/voice_anoncer /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

4. Настройте HTTPS (рекомендуется):
```bash
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d your_domain.com
```

## Руководство пользователя

### Основные функции

1. **Выбор голоса**:
   - Выберите пол голоса (Мужские/Женские)
   - Выберите конкретный голос из списка
   - Нажмите "Предпрослушка голоса" для проверки

2. **Озвучка текста**:
   - Введите текст в поле ввода
   - Настройте скорость речи
   - Нажмите "Озвучить текст"

3. **Добавление фонового звука**:
   - Включите опцию "Добавить фоновый звук"
   - Загрузите аудиофайл
   - Настройте громкость фонового звука

4. **Скачивание результата**:
   - После генерации аудио будут доступны кнопки для скачивания
   - Выберите нужный формат (WAV, MP3, OGG)

5. **Добавление собственного голоса**:
   - Загрузите аудиофайл с голосом
   - Введите имя для голоса
   - Выберите пол голоса
   - Нажмите "Добавить голос"

### Поддерживаемые форматы

- **Загрузка голосов**: WAV, MP3, OGG, M4A
- **Загрузка фоновых звуков**: WAV, MP3, OGG, M4A
- **Скачивание результата**: WAV, MP3, OGG

## Устранение неполадок

1. **Ошибка "ModuleNotFoundError: No module named 'pydub'**:
   - Убедитесь, что установлен ffmpeg
   - Переустановите pydub: `pip install pydub`

2. **Ошибка при конвертации аудио**:
   - Проверьте установку ffmpeg
   - Убедитесь, что ffmpeg доступен в PATH

3. **Медленная работа приложения**:
   - Проверьте подключение к интернету
   - Убедитесь, что на сервере достаточно ресурсов
   - Попробуйте уменьшить размер загружаемых файлов

## Безопасность

- Все загруженные файлы проверяются на соответствие поддерживаемым форматам
- Временные файлы автоматически удаляются после использования
- Рекомендуется использовать HTTPS для защиты данных

## Лицензия

MIT License

## Поддержка

Если у вас возникли проблемы или вопросы:
1. Проверьте раздел "Устранение неполадок"
2. Создайте issue на GitHub
3. Напишите на email: your.email@example.com 
